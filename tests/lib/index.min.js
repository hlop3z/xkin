var xkin=function(){"use strict";var t=Object.defineProperty,e=(e,r,s)=>((e,r,s)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s)(e,"symbol"!=typeof r?r+"":r,s);const r=t=>"string"==typeof t||t instanceof String,s=t=>r(t)?t.trim():Array.isArray(t)?t.filter((t=>t)).map(s).join(" ").trim():"object"==typeof t&&null!==t?Object.keys(t).filter((e=>t[e])).join(" ").trim():"",n=t=>r(t)?(t.trim()+";").replace(/;{1,}$/,";"):Array.isArray(t)?t.filter((t=>t)).map(n).join(" ").trim():"object"==typeof t&&null!==t?Object.entries(t).map((([t,e])=>e?`${t}: ${e};`:"")).join(" ").trim():"";class o{constructor(t={}){e(this,"config");const r=()=>({class:"",style:""});this.config={base:{class:"",style:"",...t.base},setup:t.setup||r,attrs:t.attrs||(()=>({})),theme:t.theme||{}}}start(t={}){const{base:e,attrs:r,setup:o}=this.config,c=r(t),i=o(t);return{attrs:c,class:s([e.class,i.class]),style:n([e.style,i.style]),theme:e=>this.theme(e,t)}}theme(t,e={}){const{theme:r,base:o,setup:c}=this.config,i=c(e);if(!t)return{class:s([o.class,i.class]),style:n([o.style,i.style])};const l=r[t];return l?{class:s([o.class,i.class,l.class]),style:n([o.style,i.style,l.style])}:{}}}function c(t){const e=new o(t||{});return t=>e.start(t||{})}function i(t){return{get current(){return t},contains(t){var e;return(null==(e=this.current)?void 0:e.classList.contains(t))||!1},find(t){var e;const r=(null==(e=this.current)?void 0:e.querySelectorAll(t))||[];return Array.from(r).map((t=>i(t)))},get(t){var e;const r=null==(e=this.current)?void 0:e.querySelector(t);return r?i(r):null},add(...t){this.__add(...t)},remove(...t){this.__remove(...t)},toggle(...t){this.__toggle(t)},__add(...t){t.forEach((t=>{var e;null==(e=this.current)||e.classList.add(t)}))},__remove(...t){t.forEach((t=>{var e;null==(e=this.current)||e.classList.remove(t)}))},__toggle(t){t.forEach((t=>{var e;null==(e=this.current)||e.classList.toggle(t)}))},__dict__:{display:t.style.display},hide(){this.current.style.display="none"},show(){this.current.style.display="none"!==this.__dict__.display?this.__dict__.display:""},get theme(){return this.current.__xkin__},css(t){const e=c({theme:t||{},base:{class:this.current.className,style:this.current.getAttribute("style")}})({});return this.current.__xkin__=(t,r=!0)=>{const s=e.theme(t);if(r){const t={class:this.current.className,style:this.current.getAttribute("style")};t.class!==s.class&&void 0!==s.class&&(this.current.className=s.class),t.style!==s.style&&void 0!==s.style&&this.current.setAttribute("style",s.style)}},this}}}const l=(t,e)=>{const r=document.querySelector(`[${t}="${e}"]`);return r?i(r):null};const a="xkin-css",u=(t,e="main")=>function({code:t,id:e}){const r=function(t){const e=window.document.querySelectorAll(`[${a}="${t}"]`);if(e.length>0)return e[0];{const e=window.document.createElement("style");return e.setAttribute(a,t),window.document.head.append(e),e}}(e);r.textContent=function(t){return t.replace(/\s\s+/g," ").replace(/\r?\n|\r/g,"").trim()}(t)}({code:t,id:e});const h=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;class d{constructor({base:t={},dark:r={},disable:s=[],zebra:n=!1,darkMode:o}){e(this,"base"),e(this,"dark"),e(this,"disable"),e(this,"zebra"),e(this,"colors"),e(this,"current"),e(this,"isDark");const c=void 0===o?h:o,i=Object.keys(t).length>0;this.base=t,this.dark={...t,...r||{}},this.disable=s,this.zebra=!(!i||!n)&&"#f2f2f2",this.colors=[],this.current=c?this.dark:t,this.isDark=c}createTheme(){const t=this.generateThemeColors();u(t,"theme-colors"),this.generateNames()}toggle(t){this.isDark=null==t?!this.isDark:t,this.isDark?this.current=this.dark:this.current=this.base,this.createTheme()}generateNames(){const t=[];Object.keys(this.current).forEach((e=>t.push(e))),this.colors=t}generateThemeColors(){let t="";const e=t=>this.disable.includes(t);return this.zebra&&(t+=this.colorDefaultTableZebra(this.zebra)),Object.entries(this.current).forEach((([r,s])=>{const n=t=>this.buildColorStyles(t,r,s),o=r=>{e(r)||(t+=n(r))};o("background"),o("text"),o("border"),o("table")})),t}buildColorStyles(t,e,r){let s="";return s+=(0,m[t])(e,r),s}colorDefaultTableZebra(t){return`tbody tr:nth-child(even) { background-color: ${t}; }\n`}}const b={background:t=>`background-color: ${t} !important;`,border:t=>`border-color: ${t} !important;`,text:t=>`color: ${t} !important;`,table:t=>`tbody tr:nth-child(even) { background-color: ${t} !important; }\n`},y=(t,e,r)=>"table"===t?`.${g(t,e)} ${b[t](r)}\n`:`.${g(t,e)} { ${b[t](r)} }\n`,m={background:(t,e)=>y("background",t,e),border:(t,e)=>y("border",t,e),text:(t,e)=>y("text",t,e),table:(t,e)=>y("table",t,e)};let f=new d({});function g(t,e){return{background:t=>`color-bg-${t}`,border:t=>`color-br-${t}`,text:t=>`color-tx-${t}`,table:t=>`color-tb-${t}`}[t](e)}const p={control:function(t){const e=(t=>"string"==typeof t||t instanceof String)(t)?document.querySelector(t):t;return e?i(e):null},find:(t,e)=>{const r=document.querySelectorAll(`[${t}="${e}"]`);return Array.from(r).map((t=>i(t)))},get:l,style:n,class:s,component:c,blankForm:function(t){const e={};for(const r in t)if(t.hasOwnProperty(r)){const s=t[r];e[r]="function"==typeof s?s():s}return e},theme:{set:function(t){const e=new d(t);e.createTheme(),f=e},class:g,toggle(t=void 0){f.toggle(t)},get info(){return f}},$gui:{},gui:(t,e)=>function(t){return(e,r={})=>{const s={};return Object.entries(r).forEach((([t,r])=>{s[t]=l(e,r)})),t.$gui=s,s}}(p)(t,e)};return p}();
